@if (product(); as product) {
  <div
    class="relative bg-white rounded-xl shadow-lg overflow-hidden flex flex-col h-full transition-all duration-200 ease-out hover:-translate-y-2 hover:shadow-xl"
  >
    <img
      [src]="product.imageUrl"
      [alt]="product.name"
      class="w-full h-[300px] object-cover rounded-t-xl cursor-pointer"
      [routerLink]="['/product', product.id]"
      [style.view-transition-name]="'product-image-' + product.id"
    />

    <ng-content />

    <div class="p-5 flex flex-col flex-1">
      <h3 class="text-lg font-semibold text-gray-900 mb-2 leading-tight">{{ product.name }}</h3>
      <p class="text-sm text-gray-600 mb-4 flex-1 leading-relaxed">{{ product.description }}</p>

      <app-start-rating class="mb-3" [rating]="product.rating">
        ({{ product.reviewCount }})
      </app-start-rating>

      <div class="text-sm font-medium mb-4">
        {{ product.inStock ? 'In Stock' : 'Out of Stock' }}
      </div>

      <div class="flex items-center justify-between">
        <span class="text-2xl font-bold text-gray-900">{{ product.price | currency }}</span>
        <button
          matButton="filled"
          class="flex items-center gap-2"
          (click)="addToCart()"
          [disabled]="!product.inStock"
        >
          <mat-icon fontIcon="shopping_cart" />
          Add to Cart
        </button>
      </div>
    </div>
  </div>
}
